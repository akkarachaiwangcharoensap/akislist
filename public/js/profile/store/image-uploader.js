!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=10)}({10:function(e,t,s){e.exports=s("q4Oz")},q4Oz:function(e,t,s){var i;void 0===(i=function(){return{load:function(){new Vue({el:"#images-upload",data:{$parent:null,$files:null,$dump:null,data:null,uploads:[],max:10},methods:{initialize:function(){this.$parent=$(this.$el).parent(),this.$files=this.$parent.find(".files"),this.$dump=$("#json-dump"),this.data=JSON.parse(this.$dump.val()),$(this.$el).on("dragover",$.proxy(this.onDrag,this)),$(this.$el).on("drop",$.proxy(this.onDrop,this)),this.onWindowListeners(),this.initializeUploadedFiles(),this.registerFilesListeners()},deconstruct:function(){this.$dump.remove()},onDrag:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var t=e.originalEvent.dataTransfer.items;if(t){var s=new FormData,i=!0,n=!1;_.each(t,$.proxy(function(e,t){var r=e.getAsFile();if(0!=this.isAllowed(r))if(this.uploads.length+1>this.max)n=!0;else{s.append("files["+t+"]",r);this.outputSuccess({message:"Uploading..."})}else i=!1},this));if(n){var r={message:"You are limited to "+this.max+" uploads per post."};return void this.outputSuccess(r)}if(!i)return void this.outputError({message:"Please verify your file(s).",size:"24 MB",allows:["jpg","jpeg","png"]});this.upload(s)}},outputError:function(e){var t="Allow extension(s): "+e.allows.join(", "),s=e.message+" "+t+", max size: "+e.size,i=this.errorTemplate(s),n=this.$parent.find(".status .message");n.empty(),n.append(i)},outputSuccess:function(e){var t=this.successTemplate(e.message),s=this.$parent.find(".status .message");s.empty(),s.append(t)},errorTemplate:function(e){return'<p class="error">'+e+"</p>"},successTemplate:function(e){return'<p class="success">'+e+"</p>"},upload:function(e){$.ajax({context:this,url:"/request/"+this.data.random+"/upload/image",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",dataType:"json",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){if(e.error)this.outputError(e.error);else{var t=this.uploads.length;$fileTemplate=$(this.fileTemplate(e.success.image,t));var s={el:$fileTemplate,data:e.success};this.uploads.push(s),this.$files.append($fileTemplate),this.registerFileListeners($fileTemplate),this.outputSuccess(e.success)}},error:function(e,t,s){console.error(e),console.error(t),console.error(s)}})},initializeUploadedFiles:function(){_.each(this.$files.children(),$.proxy(function(e){var t=$(e),s={el:t,data:{image:t.find("img").attr("src")}};this.uploads.push(s)},this))},fileTemplate:function(e,t){return'<div class="file" data-index="'+t+'"><div class="fa fa-times remove"></div><img src="'+e+'"/></div>'},registerFileListeners:function(e){$remove=e.find(".remove").first(),$remove.on("click",$.proxy(function(){this.remove(e)},this))},remove:function(e){var t=e.data(),s=this.uploads[t.index].data.image;e.remove(),$.ajax({context:this,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},dataType:"json",url:s+"/delete",type:"DELETE",success:function(e){e&&this.uploads.splice(t.index,1)},error:function(e,t,s){console.error(e),console.error(t),console.error(s)}})},registerFilesListeners:function(){_.each(this.$files.children(),$.proxy(function(e){var t=$(e);this.registerFileListeners(t)},this))},isAllowed:function(e){var t=!1;return _.each(["image/jpeg","image/png","image/jpeg"],function(s){e.type==s&&e.size<25165824&&(t=!0)}),t},onWindowListeners:function(){$(window).on("dragover",function(e){e.preventDefault()}),$(window).on("drop",function(e){e.preventDefault()})}},mounted:function(){this.initialize()}})}}}.call(t,s,t,e))||(e.exports=i)}});